# OpenShift 初めてのPipeline ハンズオン その3

[ハンズオン その2](./handson2.md) では、GitHubへのpushと連動するためのトリガ設定、及びテストタスクを導入しました。
ハンズオン その3では、パイプラインの終了時にメールを送信するタスクを追加します。
**なお、このハンズオンではSMTPサーバとしてGmailを利用しています。Gmailアカウントをお持ちでない、もしくは利用が躊躇われる環境の方は、適宜利用可能なSMTPサーバ等を使ってご試行いただければと存じます。**

## 1. Tekton Hubの紹介とメール送信タスクの導入

## 1.1 Tekton Hub

[Tekton Hub](https://hub.tekton.dev)というサイトでは、皆さんが必要とするようなタスクが多く公開されています。

![](./images/3/001.png)

もしクラスタータスクに必要なタスクが無く、新たにタスクを作成しなければならない場合はまずこのサイトでタスクがないか探してみてください。

今回はメール送信タスクを導入します。

### 1.2 メール送信タスクの検索

画面左側の以下2つをクリックします。

* [Kind]-[Task]
* [Category]-[Messaging]

画面中央に表示された [send mail] をクリックします。

![](./images/3/002.png)

> ※ 本ハンズオンでは扱いませんが、画面にある通りメール送信以外に Slack や Teams への通知も公開されています。

### 1.3 メール送信タスクのインストール

send mailの説明画面が表示されます。画面中央付近の[YAML]タブをクリックすると、タスクを定義するYAMLが表示されるので、これをすべてクリップボードにコピーしておきます。

![](./images/3/003.png)

OpenShiftの画面に戻ります。左上のメニューにて、[Developer]から[管理者]に切り替えます。

[タスク]をクリックし画面左上の[作成]をクリックし、[タスク]をクリックします。

![](./images/3/004.png)

タスクの作成画面にて、先ほどクリップボードにコピーしたYAMLを貼り付け、[作成]ボタンをクリックします。

![](./images/3/005.png)

以上で、メール送信タスクが作成されました。

> もし oc コマンドの利用方法を理解されている方は、この章の作業は以下のコマンドで代替できます。
> ```oc apply -f https://raw.githubusercontent.com/tektoncd/catalog/main/task/sendmail/0.1/sendmail.yaml```

## 2. GMail送信設定と動作確認

## 3. シークレットの作成

## 4. パイプラインへの組み込みと動作確認